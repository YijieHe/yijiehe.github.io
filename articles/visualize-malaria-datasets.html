
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="../theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="../theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="../theme/font-awesome/css/font-awesome.min.css">


    <link href="https://yijiehe.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Yijie He Atom">





<meta name="author" content="Yijie" />
<meta name="description" content="Visualization of malaria data" />
<meta name="keywords" content="">

<meta property="og:site_name" content="Yijie He"/>
<meta property="og:title" content="Visualize malaria datasets"/>
<meta property="og:description" content="Visualization of malaria data"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="../articles/visualize-malaria-datasets.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2020-09-19 00:00:00+00:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="../author/yijie.html">
<meta property="article:section" content="Projects"/>
<meta property="og:image" content="">

  <title>Yijie He &ndash; Visualize malaria datasets</title>

</head>
<body>
  <aside>
    <div>
      <a href="..">
        <img src="../theme/img/profile.png" alt="" title="">
      </a>
      <h1><a href=".."></a></h1>


      <nav>
        <ul class="list">
          <li><a href="../pages/About.html#About">About</a></li>
          <li><a href="../pages/Contact.html#Contact">Contact</a></li>
          <li><a href="../pages/Project.html#Project">Project</a></li>

          <li><a href="https://www.linkedin.com/in/yijie-he/" target="_blank">LinkedIn</a></li>
        </ul>
      </nav>

      <ul class="social">
      </ul>
    </div>


  </aside>
  <main>


<article class="single">
  <header>
      
    <h1 id="visualize-malaria-datasets">Visualize malaria datasets</h1>
    <p>
          Posted on Sat 19 September 2020 in <a href="../category/projects.html">Projects</a>


    </p>
  </header>


  <div>
    <div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="overview">
<h2>Overview</h2>
<p>The <a class="reference external" href="https://github.com/rfordatascience/tidytuesday/tree/master/data/2018/2018-11-13">original dataset</a>
is part of Tidytuesday weekly data projects. It contains 3 tables, which inclde worldwide malaria death rate
and incidence from 1990 to 2016.</p>
<p>The visualizations were plotted with <strong>pandas_bokeh</strong> and <strong>plotnine</strong> packages. Pandas_bokeh provides powerful
tools for interactive mapping plot. For the death rate and incidence mapping, there are slider bars that enable
users to scroll over years to see status for each country. Plotnine is a declarative system of creating graphics
based on <a class="reference external" href="https://ggplot2.tidyverse.org">ggplot</a>. As an implementation of Grammar of Graphics, it allows users to
create graphics explicitly.</p>
</div>
<div class="section" id="preview-dataset">
<h2>Preview dataset</h2>
<div class="section" id="malaria-death-by-country-across-the-world-and-time">
<h3><em>Malaria death by country across the world and time</em></h3>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="16%" />
<col width="16%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Entity</th>
<th class="head">Code</th>
<th class="head">Year</th>
<th class="head">Deaths/100,000</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Afghanistan</td>
<td>AFG</td>
<td>1990</td>
<td>6.802930</td>
</tr>
<tr><td>Afghanistan</td>
<td>AFG</td>
<td>1991</td>
<td>6.973494</td>
</tr>
<tr><td>Afghanistan</td>
<td>AFG</td>
<td>1992</td>
<td>6.989882</td>
</tr>
<tr><td>Afghanistan</td>
<td>AFG</td>
<td>1993</td>
<td>7.088983</td>
</tr>
<tr><td>Afghanistan</td>
<td>AFG</td>
<td>1994</td>
<td>7.392472</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="malaria-death-across-the-world-by-age-group-country-and-time">
<h3><em>Malaria death across the world by age group, country and time</em></h3>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="14%" />
<col width="14%" />
<col width="24%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Entity</th>
<th class="head">Code</th>
<th class="head">Year</th>
<th class="head">age_group</th>
<th class="head">Deaths</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Afghanistan</td>
<td>AFG</td>
<td>1990</td>
<td>Under 5</td>
<td>184.606435</td>
</tr>
<tr><td>Afghanistan</td>
<td>AFG</td>
<td>1991</td>
<td>Under 5</td>
<td>191.658193</td>
</tr>
<tr><td>Afghanistan</td>
<td>AFG</td>
<td>1992</td>
<td>Under 5</td>
<td>197.140197</td>
</tr>
<tr><td>Afghanistan</td>
<td>AFG</td>
<td>1993</td>
<td>Under 5</td>
<td>207.357753</td>
</tr>
<tr><td>Afghanistan</td>
<td>AFG</td>
<td>1994</td>
<td>Under 5</td>
<td>226.209363</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="malaria-incidence-across-the-world-by-country-and-time">
<h3><em>Malaria incidence across the world by country and time</em></h3>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="15%" />
<col width="15%" />
<col width="44%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Entity</th>
<th class="head">Code</th>
<th class="head">Year</th>
<th class="head">Incidence/100,000</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Afghanistan</td>
<td>AFG</td>
<td>2000</td>
<td>107.100000</td>
</tr>
<tr><td>Afghanistan</td>
<td>AFG</td>
<td>2005</td>
<td>46.500000</td>
</tr>
<tr><td>Afghanistan</td>
<td>AFG</td>
<td>2010</td>
<td>23.900000</td>
</tr>
<tr><td>Afghanistan</td>
<td>AFG</td>
<td>2015</td>
<td>23.600000</td>
</tr>
<tr><td>Algeria</td>
<td>DZA</td>
<td>2000</td>
<td>0.037746</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="visualization">
<h2>Visualization</h2>
<div class="section" id="mapping-malaria-incidence-by-country">
<h3><em>Mapping malaria incidence by country</em></h3>
<p>The mapping plots are plotted with <strong>pandas_bokeh</strong> package. Users can interact with the figure
with customized slider. Based on the two mapping plot, it can be observed that the majority of malaria incidence
and death were in Africa and middle east area.</p>
<pre class="code ipython3 literal-block">
<span class="n">slider_range</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">2005</span><span class="p">,</span> <span class="mi">2010</span><span class="p">,</span> <span class="mi">2015</span><span class="p">]</span>
<span class="n">slider_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="k">i</span> for i in slider_range]

<span class="n">inc_geo</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">plot_bokeh</span><span class="p">(</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">900</span><span class="p">,</span> <span class="mi">600</span><span class="p">),</span>
    <span class="n">simplify_shapes</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span>
    <span class="n">slider</span><span class="o">=</span><span class="n">slider_columns</span><span class="p">,</span>
    <span class="n">slider_range</span><span class="o">=</span><span class="n">slider_range</span><span class="p">,</span>
    <span class="n">slider_name</span><span class="o">=</span><span class="s2">&quot;Year&quot;</span><span class="p">,</span>
    <span class="n">colormap</span> <span class="o">=</span> <span class="s2">&quot;RdBu&quot;</span><span class="p">,</span>
    <span class="n">hovertool_columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'Entity'</span><span class="p">],</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Annual incidence from malaria by countries [per 100,000 population at risk]&quot;</span>

<span class="p">)</span>
</pre>
<img alt="mapplot of malaria incidence across the world." src="/images/worldmap_inc.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="mapping-annual-death-rate-from-malaria-by-country">
<h3><em>Mapping annual death rate from malaria by country</em></h3>
<pre class="code ipython3 literal-block">
<span class="n">slider_range</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1990</span><span class="p">,</span> <span class="mi">2017</span><span class="p">)</span>
<span class="n">slider_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="k">i</span> for i in range(1990, 2017)]

<span class="n">death_geo</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">plot_bokeh</span><span class="p">(</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">900</span><span class="p">,</span> <span class="mi">600</span><span class="p">),</span>
    <span class="n">simplify_shapes</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span>
    <span class="n">slider</span><span class="o">=</span><span class="n">slider_columns</span><span class="p">,</span>
    <span class="n">slider_range</span><span class="o">=</span><span class="n">slider_range</span><span class="p">,</span>
    <span class="n">slider_name</span><span class="o">=</span><span class="s2">&quot;Year&quot;</span><span class="p">,</span>
    <span class="n">colormap</span> <span class="o">=</span> <span class="s2">&quot;RdBu&quot;</span><span class="p">,</span>
    <span class="n">hovertool_columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'Entity'</span><span class="p">],</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Annual death from malaria by countries [per 100,000 people]&quot;</span>

<span class="p">)</span>
</pre>
<img alt="" src="/images/worldmap_death.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="worldwide-death-from-malaria-summary-by-age-group">
<h3><em>Worldwide death from malaria summary by age group</em></h3>
<p>The major population that died from malaria is children less than 5 years old.</p>
<pre class="code ipython3 literal-block">
<span class="n">world_da</span><span class="o">.</span><span class="n">plot_bokeh</span><span class="o">.</span><span class="n">area</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;year&quot;</span><span class="p">,</span>
    <span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">legend</span><span class="o">=</span><span class="s2">&quot;bottom_left&quot;</span><span class="p">,</span>
    <span class="n">colormap</span><span class="o">=</span><span class="s2">&quot;Spectral&quot;</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Worldwide annual death from malaria by age group [per 100,000 population]&quot;</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">xticks</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1990</span><span class="p">,</span> <span class="mi">1995</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">2005</span><span class="p">,</span> <span class="mi">2010</span><span class="p">,</span> <span class="mi">2015</span><span class="p">]</span>
<span class="p">)</span>
</pre>
<img alt="" src="/images/age_group.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="malaria-incidence-of-by-income-group">
<h3><em>Malaria incidence of by income group</em></h3>
<p>The <strong>plotnine</strong> package is an python implementation of <strong>ggplot</strong>. Exactly the same
ggplot commands can be procssed as in R.</p>
<pre class="code ipython3 literal-block">
<span class="n">ggplot</span><span class="p">(</span><span class="n">income_melt</span><span class="p">,</span> <span class="n">aes</span><span class="p">(</span><span class="s1">'variable'</span><span class="p">,</span> <span class="s1">'value'</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="s1">'Entity'</span><span class="p">))</span> \
<span class="o">+</span> <span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span> <span class="o">=</span> <span class="s1">'identity'</span><span class="p">)</span> <span class="o">+</span> <span class="n">xlab</span><span class="p">(</span><span class="s1">'year'</span><span class="p">)</span> <span class="o">+</span> <span class="n">ylab</span><span class="p">(</span><span class="s1">'Incidence per 100,000'</span><span class="p">)</span> \
<span class="o">+</span> <span class="n">labs</span><span class="p">(</span><span class="n">fill</span> <span class="o">=</span> <span class="s1">'Income group'</span><span class="p">)</span> <span class="o">+</span> <span class="n">ggtitle</span><span class="p">(</span><span class="s1">'Malaria incidence by income group'</span><span class="p">)</span>
</pre>
<img alt="" src="/images/income_group.png" />
</div>
</div>

  </div>
  <div class="tag-cloud">
    <p>
    </p>
  </div>





</article>

    <footer>
<p>&copy;  </p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Yijie He ",
  "url" : "..",
  "image": "",
  "description": ""
}
</script>

</body>
</html>